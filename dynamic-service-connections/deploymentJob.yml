parameters:
  jobName: Deploy

jobs:
- job: ${{ parameters.jobName }}
  displayName: ${{ parameters.jobName }}

  steps:
  - checkout: self
  - script: echo $(azureServiceConnection)

- deployment: ${{ parameters.jobName }}
  displayName: ${{ parameters.jobName }}
  environment: $(environment)
  strategy:
    runOnce:
      deploy:
        steps:
        - task: AzurePowerShell@5
          displayName: 'Azure Powershell Test'
          inputs:
            azureSubscription: $(azureServiceConnection)
            ScriptType: InlineScript
            azurePowerShellVersion: LatestVersion
            pwsh: true
            Inline: |
              Get-AzContext